GreedyBiddingStrategiesforKeywordAuctionsMatthewCaryUniversityofWashingtonAparnaDasBrownUniversityBenEdelmanHarvardUniversityIoannisGiotisUniversityofWashingtonKurtisHeimerlUniversityofWashingtonAnnaR.KarlinUniversityofWashingtonClaireMathieuBrownUniversityMichaelSchwarzYahoo!ResearchABSTRACTHowshouldplayersbidinkeywordauctionssuchasthoseusedbyGoogle,Yahoo!andMSN?Weconsidergreedybid-dingstrategiesforarepeatedauctiononasinglekeyword,whereineachround,eachplayerchoosessomeoptimalbidforthenextround,assumingthattheotherplayersmerelyrepeattheirpreviousbid.Westudytherevenue,conver-genceandrobustnesspropertiesofsuchstrategies.Mostinterestingamongtheseisastrategywecallthebalancedbiddingstrategy(bb):itisknownthatbbhasauniquefixedpointwithpaymentsidenticaltothoseoftheVCGmecha-nism.Weshowthatifallplayersusethebbstrategyandupdateeachround,bbconvergeswhenthenumberofslotsisatmost2,butdoesnotalwaysconvergefor3ormoreslots.Ontheotherhand,wepresentasimplevariantwhichisguaranteedtoconvergetothesamefixedpointforanynumberofslots.Inamodelinwhichonlyonerandomlychosenplayerupdateseachroundaccordingtothebbstrat-egy,weprovethatconvergenceoccurswithprobability1.Wecomplementourtheoreticalresultswithempiricalstud-ies.CategoriesandSubjectDescriptorsH.4.0[InformationSystemsApplications]:General;G.0[MathematicsofComputing]:GeneralGeneralTermsAlgorithms,economics,theoryKeywordsKeywordauctions,biddingstrategies1.INTRODUCTIONOnlinesearchengineadvertisingisanappealingapproachtohighlytargetedadvertising,andisthemajorsourceofrevenueformodernwebsearchenginessuchasGoogleandPermissiontomakedigitalorhardcopiesofallorpartofthisworkforpersonalorclassroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributedforprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitationonthefirstpage.Tocopyotherwise,torepublish,topostonserversortoredistributetolists,requirespriorspecificpermissionand/orafee.EC’07,June11–15,2007,SanDiego,CA.Copyright2007ACM978-1-59593-653-0/07/0006...$5.00.Yahoo!.Thebasicsetupisasfollows:whenapersonper-formsaqueryatasearchengine,hereceivesapageofresultsthatcontainsthelinksthesearchenginehasdeemedrele-vanttothesearch,togetherwithsponsoredlinks,i.e.,paidadvertisements.Fromtheadvertiser’sperspective,thisap-proachoffersagreatbenefit:theycanpreciselytargettheiradsbasedonusers’searchterms.Forexample,ifatravelagent“buys”thesearchterm“Tahiti,”thenwhensearchingontheword“Tahiti”,ausermightbeshownalinktothewebpageforthattravelagentoffering,say,planeticketstoTahiti.Iftheuseractuallyclicksonthislink,hewillbetransferredtotheaforementionedwebpage.Foreachsuchclick,inwhichtheadvertiserreceivesapotentialcustomer,theadvertiserpaysthesearchengine.Theprocessofdeterminingwhichadsgetassignedtowhichkeywords(searchterms)andhowmucheachadver-tiserpaysisresolvedviakeywordauctions.Advertiserschoosewhichkeywordstheywanttobidonandparticipateinauctionsforthosekeywords.Forakeywordofinterest,eachadvertisersubmitsabidstatingthemaximumamountitiswillingtopayforaclick.Whenausersubmitsaqueryonthatkeyword,aninstantaneousauctionisruntode-terminewhichoftheadvertiserscurrentlybiddingonthatkeywordareallocatedadvertisingslots.Intheabsenceofbudgetconstraints,thereisoneandonlyonetruthfulauctionthatcaninprinciplebeused:theVickrey-Clarke-GrovesorVCGmechanism[12,3,7].Thismechanismhasthepropertythatitisinthebestinterestoftheparticipatingadvertiserstobidtheirtruevaluationofaclick.DespitethisappealingpropertyoftheVCGmecha-nism,nosearchengineusestheVCGmechanism.Rather,themostwidelyusedauctionisthenon-truthfulGeneralizedSecondPriceorGSPauction(describedinSection2).ThefactthattheGSPmechanismisnottruthfulmeansthattheparticipatingadvertisersareforcedtoundertakethecomplicatedtaskofchoosingabiddingstrategy.As-demir[1]andEdelmanetal.[4]observethatinstabilityandbiddingwarscanresultfromtheuseoftheGSPmechanism.Tomakemattersworse,onatypicalsearchpage,thereisroomformultiplesponsoredlinks.Thepositioningofthesesponsoredlinksaffectsthechancesthatasponsoredlinkwillbeclickedonandthustheseadvertisingslotshavevaryingdesirabilityfromtheperspectiveofadvertisers.Thissearchtermstotargetandcompeteinapotentiallylargenumberofkeywordauctionsforthoseterms.Atthesametime,advertisershavetheopportunitytoupdatetheirbids.Thisistypicallydoneautomaticallyviasoftwarerobots[9].InthisequilibriumofGSP.GSPalsohasNashequilibriainwhichtherevenuetothesearchengineiseitherhigherorlowerthanthatintheVCGequilibrium(see,forexample,Var-ian[11]orTheorem16inthispaper).Itisnotclearwhetheranyoftheseequilibriaareactuallyreachedinrealkeywordauctions.Itisalsonotclearwhatbiddingstrategyplayersmightemploytoreachaparticularequilibrium.Oneofthegoalsofthispaperistogainsomeinsightintotheseissues.Weconsiderarepeatedkeywordauction,withafixedsetofnplayersandkslots.Theparticipantsintherepeatedauctionhavetheopportunitytoupdatetheirbidsinbe-tweensuccessiverounds.Howshouldplayersbid?Natu-rally,aplayer’smainobjectiveistomaximizehisownex-pectedutilityovermultipleroundsoftheauction.However,withoutanyrealinsightintothebiddingstrategiesfollowedbytherestoftheplayers,itisdifficultforoneplayertomakepredictionsaboutthefuturebidsofotherplayersandhencechooseanoptimalbiddingstrategy.Thus,anaturalapproachistoassumethattheimmediatepastisthebestpredictorofthefuture.Thisleadstoanaturalgreedy-likebiddingschemewhereaplayerassumesthatalltheotherbidswillremainfixedinthenextround.Underthisas-sumption,therationalchoiceforaplayerjistobidsoastowinaslotsthatmaximizeshisutilityuj=θs(vj−ps).Thisleadstothefollowingdefinition.Definition3.GreedyBiddingStrategiesAgreedybiddingstrategyforaplayerjistochooseabidforthenextroundofarepeatedkeywordauctionroundsoastomaximizehisutilityuj,assumingthebidsofallotherplayersb−jinthenextroundwillremainfixedtotheirvaluesinthepreviousround.Givenb−j,denotebyp−j(s)thepaymentplayerjwouldmakeifhebidssoastowinslots.Lets∗betheslotthegreedybidderjwilltarget.Thenifplayerjisgreedy,hewillbidb0∈(p−j(s∗−1),p−j(s∗)).Asb0isnotfullyspecified,thisdefinesaclassofstrategiesthataredistinguishedbythechoiceofb0withintheallowedrange.Advertisersparticipatinginakeywordauctionareoftenbusinesscompetitors.Oneofthemostcommonlyobservedsecondaryobjectivesbesidesgainingtheoptimalslotisthedesireto“push”thepricespaidbyotheradvertisershigher.Thisisnaturallydonebybiddinginthehighendoftherangementionedearlier.However,thereistheriskthatachangeinotherplayers’bidscouldresultinpayingahigherpricethanexpected.Balancingtheseobjectivesleadstothefollowingbiddingstrategy.Definition4.BalancedBiddingTheBalancedgreedybiddingstrategybbisthestrategyforaplayerjthat,givenb−j•nexttargetstheslots∗jwhichmaximizeshisutility(greedybiddingchoice),thatis,s∗j=argmaxs{θs(vj−p−j(s))}.•choosesitsbidb0forthenextroundsoastosatisfythefollowingequation:θs∗j`vj−p−j(s∗j)´=θs∗j−1`vj−b0´.Ifs∗jisthetopslot,we(arbitrarily)chooseb0=(vj+p−j(1))/2.Wecanthusdealwithallslotsuniformlybydefiningθ0=2θ1.Theintuitionbehindthebidselectionisthattheplayerbidshighenoughtoforcethepricespaidbyhiscompetitorstorise,butnotsohighthatifoneofhiscompetitorsweretojustundercuthim,hewouldmindgettingahigherslotatapricejustbelowhisownbidofb0.Thebbstrategyisanappealingstrategyforthefollowingreason.Theorem5.[5]Ifalltheplayersarefollowingthebbstrategyinanauctionwithalldistinctθs,thenthesystemhasauniquefixedpoint.Inthisfixedpoint,therevenueoftheauctioneer(andpaymentsofeachplayer)isequaltothatoftheVCGequilibrium.Theequilibriumbidsb∗joftheplay-ersinthefixedpointofbbsatisfythefollowingequations:b∗j=vjifj≥k+1andγjb∗j+1+(1−γj)vjif2≤j≤k.(1)whereγj=θj/θj−1.3.CONVERGENCEPROPERTIESOFTHEBBSTRATEGYWestudytheconvergencepropertiesofthebbstrategyinarepeatedkeywordauctionundertwomodels.Werefertoourstandardmodel,whereallplayerssimultaneouslyup-datetheirbidsoneachroundasthesynchronousmodel.Intheasynchronousmodel,ineachround,exactlyoneplayerupdatesherbid,whiletheotherplayersmerelyrepeattheirpreviousbids.Weconsiderboththecaseinwhichtheplayerperformingtheupdateisarbitraryandthecasewheretheplayerperformingtheupdateischosenatrandom.Thishasbeenstudied,forexampleinZhang[14].Theasynchronousmodelisclosertoactualpracticeinsponsoredsearch,al-thoughthesynchronousmodelappliesinon-linesettingswherebidsareupdatedinbatches.Theorem6.Considerarepeatedkeywordauctionwhereallplayersareusingthebbstrategystartingwitharbitraryinitialbids.Wehave:1.A2-slotauctionsystemalwaysconvergestoitsfixedpointinboththesynchronousandasynchronousmod-els.ThenumberofroundsuntilconvergenceinthesynchronousmodelisO(log((v2−v3)/v3)),wheretheconstantdependsontheclick-throughratesθ1andθ2.2.Thereexistsa3-slotauctionsystemandsetofinitialbidswhichdoesnotconvergeinthesynchronousmodel.3.Thereexistsa3-slotauctionsystem,asetofinitialbids,andanorderinwhichtheplayersupdatewhichdoesnotconvergeintheasynchronousmodel.4.Intheasynchronousmodelwhereplayersbidinran-domorder,nomatterhowmanyslotsthereare,thesystemalwaysconvergestoitsfixedpoint.ProofofPart1:Lemma7.Ateveryroundtsuchthatt>t1=2Proof.Letbdenotethethirdhighestbid.Bythesecondround,bcanneverbemorethanv3.Supposeforsomeroundthatbislessthanv3.Takeaplayeriin{1,2,3}.Inthenextround,iwillbidhervalueortargetsomeslotj∈{1,2}andbidb0i=(1−γj)vi+γjpj≥(1−γ∗)v3+γ∗b=b+(1−γ∗)(v3−b).Ineithercase,(v3−b0i)≤γ∗(v3−b).Initiallyv3−b≤v3.Ittakesatatmostr=logγ∗((1−γ∗)(v2−v3)/v3)beforev3−b<(1−γ∗)(v2−v3).(Recallthatγ∗<1astheθi’saredecreasing.)Inroundr+1,biddersi∈{1,2}willeachbideithervi>v3ortargetaslotj∈{1,2}andbidb0i=(1−γj)vi+γjpj≥(1−γ∗)v2+γ∗b=b+(1−γ∗)(v2−b)>b+(1−γ∗)(v2−v3)>v3,henceineithercasetheirbidsarebothabovev3.Inroundr+2,player3willthenbidv3whileplayers1and2keeponbiddingabovev3;thisconcludestheproofofthelemma.OncetheconditionsofLemma7hold,thepriceofslot2isfixedatp2=v3.LetT2=b∗2=(1−θ2/θ1)v2+(θ2/θ1)p2andT1=(1−θ2/θ1)v1+(θ2/θ1)p2.Ifthelastbidsofplayers1and2wereb1andb2then,inthenextround,theirbidsare:b01=T1ifb2>T1,(v1+b2)/2otherwise.(2)b02=T2ifb1>T2,(v2+b1)/2otherwise.Letbmin=min(b1,b2)betheminimumofthetwobids.Lemma8.Afteratmostt2rounds,wehavebmin≥T2,wheret2≤t1+2θ1−θ2θ2.Proof.Assumethatattimet>t1,wehavebmin<T2.Thenitiseasytocheckthatatthenextroundwehaveb0min≥(v2+bmin)/2.Thisimpliesb0min−bmin≥v2−bmin2≥v2−T22=θ2θ1v2−p22=δ.Sinceattimet1wehavebmin≥v3,wewillreachb0min≥T2afteranadditionalnumberofroundsboundedby(T2−v3)/δ.Finally,sinceatroundt2wehavebmin≥T2,attimet2+1wewillhaveb02=T2<T1,andthereforeattimet2+2wewillhaveb002=T2=b∗2andb001=(v1+T2)/2=b∗1;wehavereachedequilibrium.ThisprovesPart1oftheTheoreminthesynchronousmodel.Theproofofconvergenceintheasynchronousmodelissimilar,butcomplicatedbytherandomorderofbidding.Lemma7holdswithaconstantfactorincreaseint1toallowforallbidderstomakeabid.Lemma8iseasiertocheckasinthiscaseonlythetoptwoplayersaltertheirbids,thereforeaftert2bidalternationswereachthesameoutcome.ProofofPart2:Unfortunately,anauctionsystemwherealltheplayersfollowthebbstrategyisnotguaranteedtoconvergewhentherearemorethan2slots.Wewillshowthiswiththefollowingcounterexample.Lettherebethreeslotswithθ1=1,θ2=2/3,θ3=1/3andfourplayerswithvalues161,160,159and100.Lettheinitialbidsof130.5,130,129.5and100,respectively.Thenthebiddingevolvesasbelow;inparticularitisnotconvergent.RoundBidderValue123161130.5145.5130.5160130145.25130159129.5144.75129.5100100100100Thereisoneinactivebidder,withthelowestvalue,whowillneverbeabletobidforaslotasthepricesareallabovehisutility.Itthefirstround,theremainingbiddersalltargetthelowestslot.Thebidfromthehighest-valuedplayerislowenoughsothatforthenextround,allthreetopbidderstargetthefirstslot.Withthesehighbids,thepriceforanyplayerforthetopslotistoohighwhencomparedwiththepriceofthelastslot.Thusforthethirdroundallthreetopplayerstargetthelastslot,andthecyclecontinues.Inthisexampletheclick-throughratesfollowasimplege-ometricsequence,similartothoseobservedinpractice[6].Notethatinthisexamplethebidsarewell-behaved,inthesensethatthebidsareinthesameorderastheplayers’val-ues.Hencesuchregularityisnotsufficientforconvergence.Finally,eventhoughweusedourconventionofθ0=2,asimilarexamplecanbeconstructedwheretheplayersarecyclingwhiletargetingintermediateslots.Thisconcludestheproofofpart2.ProofofPart3:Considerthefollowingthreeslotexamplewithθ1=1,θ2=0.1andθ3=0.09andthetopthreebiddersalternatinginsequence.RoundValue123456710219.280.880.880.819.219.219.210119.119.190.990.990.919.119.110059.659.659.695.4595.4595.4559.61010101010101010ProofofPart4:AproofsketchisgiventheAppendix.Notes•Theexampleaboveshowingthatfor3slots,bbdoesn’tconvergeinthesynchronousmodelisnotanomalous.InSection5,weshowexperimentallythatinasignifi-cantfractionofinstances,bbdoesnotconvergeinthesynchronousmodel.•Theboundwegiveonthetimetoconvergenceofbbintherandomasynchronousmodelisextremelyloose.Wehaverunsimulationstostudythespeedofconver-genceinthissettingandhavefoundexperimentallythatconvergenceisactuallyquitefast,certainlynomorethanapolynomialinn,thenumberofbidders.4.CONVERGENCEPROPERTIESOFTHERESTRICTED-BBSTRATEGYWewillnowexamineavariantaslotoflowerclick-throughratethantheonetheycurrentlyhave.Therbbstrategyisdesignedsothatithasthesameuniquefixedpointasbb.However,byrestrictingthedegreetowhichaplayercanbegreedy,wewillbeabletoshowthateveninthesynchronousmodel,rbbalwaysconvergestotheVCGequilibrium.Definition9.TheRestrictedBalancedBidding(rbb)biddingstrategyisthestrategywheregivenb−jfromthepre-viousround,playerj•targetstheslots∗jwhichmaximizeshisutilityamongtheslotswithnohigherclick-throughratethanhiscurrentslotsj,thatis,s∗j=argmax{θs(vj−p−j(s)):s≥sj}.•choosesherbidb0forthenextroundsoastosatisfythefollowingequation:θs∗j`vj−p−j(s∗j)´=θs∗j−1`vj−b0´.Tomakesurethisiswell-definedforthefirstslot,wedefineθ0=2θ1.Theorem10.1.ThesystemdefinedbyarepeatedkeywordauctioninwhichalltheplayersarefollowingtherbbstrategyhasauniquefixedpointatwhichplayersarebiddingaccordingtotheVCGequilibrium,i.e.theequilibriumbidsb∗jaregivenbyEquation(1).2.Inthesynchronousmodeltherbbstrategyalwayscon-vergestoitsfixedpoint.Thenumberofstepsuntilconvergenceis2ktimesO„k+log(1−γ∗)logγ∗+log(1/γ∗)v1−vk+1min1≤i≤k(vi−vi+1)«,whereγ∗=maxiθi/θi−1.Proof.TheproofofPart1oftheTheoremisverysimi-lartothatofTheorem5.(SeeEdelmanetal.[5].)ToprovePart2,wefirstboundthenumberofstepsuntilthepriceofslotkandthesetofplayerswhowillbeallocatedslotshaveconverged.Asbefore,wedefineγi=θi/θi−1.Lemma11.Playerppreferstotargetslotjratherthanslotj−1ifandonlyif(1−γj)vp+γjpj<pj−1.TheproofofthisLemmaissimplealgebraandisomitted.Lemma12.Ateveryroundtsuchthatt>t1=2+logγ∗((1−γ∗)(vk−vk+1)/vk+1),whereγ∗=maxi>0θi/θi−1,wehave:bi>vk+1∀i≤k,bi=vi∀i≥k+1.Proof.Letbdenotethe(k+1)sthighestbid.Bydefini-tion,bcanneverbemorethanvk+1.Supposeforsomeroundthatbislessthanvk+1.Takeanyplayeriin{1,2,...,k+1}.Inthenextround,iwilleitherbidhervalueortargetsomeslotj∈{1,...k}andbidb0i=(1−γj)vi+γjpj≥(1−γ∗)vk+1+γ∗b≥b+(1−γ∗)(vk+1−b).Ineithercase,(vk+1−b0i)≤γ∗(vk+1−b).Initiallyvk+1−b≤vk+1.Howmanyroundsdoesittakebeforevk+1−b<(1−γ∗)(vk−vk+1)?Atmostr≤logγ∗((1−γ∗)(vk−vk+1)/vk+1).Inroundr+1,biddersi∈{1,...k}willeachbideithervi>vk+1orbidatleastb0i=(1−γj)vi+γjpj≥(1−γ∗)vk+γ∗b≥b+(1−γ∗)(vk−b)>b+(1−γ∗)(vk−vk+1)>vk+1,henceineithercasetheirbidsareabovevk+1.Inroundr+2,playerk+1willthenbidvk+1whileplayers1,2,...,kcontinuetobidabovevk+1;theotherplayersdon’tgetaslot,sotheybidtheirvalue,andthisconcludestheproof.Wenowneedtoprovethattheallocationofthekslotsplayerstothesekplayersconvergestoafixedpoint.Atanytime,foranyi∈[1,k],considertheplayersal-locatedslots[i+1,k].TheyarecalledstableiftheirbidsandpricessatisfyEquation(1),thatis,theallocationisinorderofdecreasingvalues,andifπ(j)istheplayercurrentlyallocatedslotj,thenthelastbidsofthoseplayerssatisfied:bπ(j)=γjbπ(j+1)+(1−γj)vπ(j),foreveryj∈[i+1,k].Iftheplayersallocatedallslots[1,k]formastableset,thenwehavereachedthefixedpointoftherbbstrategy.Assumethatthecurrentsettingisnot(yet)afixedpointoftherbbstrategy.LetAbethemaximumstableset,withassociatedi≥2,andletBbethesetofplayersinslots[1,i].LetbmindenotetheminimumbidfromplayersofB.Wedefineapartialorderoversetsofplayers.WesaythatA0AifeitherA⊂A0andA6=A0,oriftheplayerofminimumvalueinthesymmetricdifferenceofAandA0belongstoA02.Thiswillbeourmeasureofprogress.Inthenextround,observethat,followingtherbbstrat-egy,playersinAstillbidinthesamewayasbefore.Letb0minbethenewminimumbidfromplayersofB,andpbetheplayerofBwhosebidisb0min.Therearethreecasestoconsider.1.pbidsbelowpi.Letj∈[i+1,k]betheslotwhichwastargetedbyp.Bydefinition,pprefersslotjtoslotj−1,andso,byLemma11,thebidofpislessthanpj−1.Bydefinition,thebidis(1−γj)vp+γjpj>pj,thusitfallsintheinterval(pj−1,pj)andpwillbeallocatedslotj.Recallthatπ(j)∈Adenotestheplayerwhowasinslotjinthepreviousround.SincesetAisstable,bydefinitionwehavepj−1=(1−γj)vπ(j)+γjpj.Sincethisisgreaterthanthebidofp,itfollowsthatvπ(j)>vp.Moreover,sincepprefersslotjtoslotj+1,byLemma11again,wemusthave(1−γj+1)vp+γj+1pj+1>pj=(1−γj+1)vπ(j+1)+γj+1pj+1,andsovp>vπ(j+1).ThusA0={p0∈A:vp0<vp}∪{p}isastableset,andA0A.2.ptargetedsloti.Thenpisallocatedsloti,A0=A∪{p}isastableset,andA0A.3.ptargetedsomeslotj≤i−1.ThenAisstillastableset,andbmin=pi−1hasincreased:b0min=(1−γj)vp+γjpj≥bmin+(1−γ∗)(vp−bmin).2ThiscorrespondsWewillprovethatCase3canonlyhappenaboundednumberxoftimes,(wherexdependsontheθj’sandthevj’sbutnotonthebids)beforeCase1or2mustoccur.1.8.6.4.200.50.550.60.650.70.750.80.850.90.951Pr(Converge)δ15355575510152025Rate(Bidsperplayer)#players(a)Synchronousconvergencefraction(b)11.21.41.600.10.20.30.40.50.60.70.80.91RevenueδMaxdebt-averseequilibriumbids=valuescbFigure3:ComparingrevenuefromCBwiththeVCGrevenue(VCG=1)00.20.40.60.8100.60.8100.10.20.30.40.50.60.70.80.91RevenueδabMinNashequilibriumFigure5:ABtotalrevenue(VCG=1)1.91.61.31.7.400.20.40.60.81RevenueδTheseexamplesrelyonplayervaluesthatarearbitrar-ilyseparated.ThesecondexamplewasconstructedusingthefollowingexpressionfromVarian[11],whichgivesthepaymentsthatachievethemaximumNashrevenue.θipi=Xj>i