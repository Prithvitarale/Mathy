ExtendingLipschitzfunctionsviarandommetricpartitionsJamesR.Leeâˆ—U.C.Berkeleyjrl@cs.berkeley.eduAssafNaorMicrosoftResearchanaor@microsoft.com1IntroductionManyclassicalproblemsingeometryandanalysisinvolvethegluingtogetheroflocalinforma-tiontoproduceacoherentmustarguethatitispossibletoextendLipschitzfunctionstoarbitrarilymanypointsatonce,anditisthereforenotsurprisingthatsuchresultsaremorerecent.ThefollowingtheoremwasprovedbyMarcusandPisierin[27],viaadistributionoverpartitionsofXwithcertaindesirableproperties.Forexample,oneoftenrequiresthateachsetinthepartitionhassmalldiameterandyet,inexpectation,thateverypointisâ€œfarfromtheboundaryâ€ofthepartition.Variantsofthisapproachhaveappearedinnumerouscontexts;seeforinstance[26,20,2].Weofferanewapproachtoextensionproblemsbyshowingthatonecanpassfromastochasticdecompositiontoaâ€œwell-behavedâ€partitionofunitywhich,inturn,canbeusedtoextendLipschitzfunctionsinsuchawaythatwehavecontrolonthegrowthoftheLipschitzconstant.Thisallowsustoobtainsimpleproofsofmanyoftheextensiontheoremsstatedabove,andmoreimportantly,toobtainnewextensiontheoremswhich,insomecases,aresignificantWenowdefinethesetofmetricssupportedonGbyhGi=[allweightsÎ£(G)wheretheunionistakenoverallpossibleweightsonedgesofG.Finally,forafamilyofgraphsF,lethFi=SGâˆˆFhGi.GivensuchafamilyofgraphsF,onecanaskwhenthereexistsaconstantKFsuchthat,ae(hFi)â‰¤KF.Forinstance,notethatifFisthefamilyofgraph-theoretictrees,thenhFiispreciselytheclassofmetricswhichareasubmetricofaseparablemetrictree,andsucharesultwouldstrengthenTheorem1.5intheseparablecase.WewillseemomentarilythatsucharesultdoesfollowandthusimpliesthataLipschitzfunctiononanysubsetofaseparableWenoteherethatsinceanyn-pointmetricspaceisisometricallyembeddableinatwo-dimensionalRiemannianmanifoldofgenusO(n3),inCorollary1.9,ae(M)musttendtoinfinitywiththegenusofM.Usingourin[11]andhasbeensubsequentlystudiedbyLang,PavlovicÌandSchroederin[23].Wereferto[5,23,26]andthereferencesthereinforaselectionofrelatedresults.Sinceourapproachtotheextensionproblemisbasedon1.4SomeopenproblemsWeendthisintroductionbyrecallingsomerelatedproblemswhichremainopen.In[1],K.Ballaskedwhethere(L2,L1)isfiniteorinfinite.Similarly,itisnotknownwhetherfor2<p<âˆand1<q<2,e(Lp,Lq)<âˆ.ThesecondproblemwillbeansweredaffirmativelyifBallâ€™sMarkovtype2problem[1]isresolvedpositively.Finally,itisnotknownwhether,foreverymetricspaceXlemmaimpliesthatforeveryyâˆˆYthefunctionÏ‰7â†’f(Î³(Ï‰))Î¨(Ï‰,y)isBochnermeasurable.Moreover,foreveryxâˆˆX,Zâ„¦kf(Î³(Ï‰))kÎ¨(Ï‰,y)dÂµ(Ï‰)â‰¤Zâ„¦kf(Î³(Ï‰))âˆ’f(x)k+kf(x)kÎ¨(Ï‰,y)dÂµ(Ï‰)â‰¤kfkLipÂ·Zâ„¦d(Î³(Ï‰),x)Â·|Î¨(Ï‰,x)âˆ’Î¨(Ï‰,y)|dÂµ(Ï‰)+kf(x)kâ‰¤kfkLipÂ·Kd(x,y)+kf(x)k<âˆ.SinceCisclosed,itfollowsthattheBochnerintegralRâ„¦d(Î³(Ï‰),x)Î¨(Ï‰,y)dÂµ(Ï‰)isawell-definedelementofC.Wecanthereforedefine,forxâˆˆY,Ëœf(x)=Râ„¦f(Î³(Ï‰))Î¨(Ï‰,x)dÂµ(Ï‰)xâˆˆY\X,f(x)xâˆˆX.(2)ClearlyËœfisanextensionoff.TochecktheLipschitzcondition,takexâˆˆYandyâˆˆY\X.FixzâˆˆXsuchthatd(x,z)â‰¤2d(x,X),andobservethatËœf(y)âˆ’Ëœf(x)=Zâ„¦f(Î³(Ï‰))âˆ’f(z)Â·Î¨(Ï‰,y)âˆ’Î¨(Ï‰,x)dÂµ(Ï‰).Indeed,thisisobviouslytrueifx,yâˆˆY\X,whileifxâˆˆXthennecessarilyx=z,andtherequiredidentityfollowsfrom(2)andthefactthatÎ¨(Ï‰,z)â‰¡0.Now,||Ëœf(x)âˆ’Ëœf(y)||â‰¤kfkLipZâ„¦d(Î³(Ï‰),z)Â·|Î¨(Ï‰,x)âˆ’Î¨(Ï‰,y)|dÂµ(Ï‰)â‰¤kfkLipZâ„¦d(Î³(Ï‰),x)+d(x,z)Â·|Î¨(Ï‰,x)âˆ’Î¨(Ï‰,y)|dÂµ(Ï‰)â‰¤3kfkLipZâ„¦d(Î³(Ï‰),x)Â·|Î¨(Ï‰,x)âˆ’Î¨(Ï‰,y)|dÂµ(Ï‰)â‰¤3KÂ·kfkLipd(x,y).3StochasticmetricdecompositionInthissection,weintroducevariousnotionsofâ€œwell-behavedâ€random(pointed)partitionsofametricspaceandshowthattheyexistinseveralimportantcases.Section4establishesthatsuchdecompositionsimplytheexistenceofgentlepartitionsofunity.3.1Well-behaveddecompositionsInwhatfollows,weusetheconventionthatthedistancefromapointinametricspacetotheemptysetisâˆ.Definition3.1(Stochasticdecomposition).Let(Y,d)beametricspaceandXasubspaceofY.Weshallsaythat(â„¦,Âµ,{Î“i(Â·),Î³i(Â·)}iâˆˆI)isastochasticdecompositionofYwithrespecttoXifIissomeindexset,(â„¦,Âµ)isaprobabilityspace,foreveryÏ‰âˆˆâ„¦,{Î“i(Ï‰)}iâˆˆIisapartitionofYintoBorelsubsetsandforeveryxâˆˆYtheset{iâˆˆI:âˆƒsuchthatforeveryÏ‰âˆˆâ„¦,dÎ³i(Ï‰),Î“i(Ï‰)<2dX,Î“i(Ï‰).Finally,werequirethatforeveryxâˆˆYandiâˆˆItheset{Ï‰âˆˆâ„¦:xâˆˆÎ“i(Ï‰)}ismeasurable.If{{Î“i(Ï‰)}iâˆˆI:Ï‰âˆˆâ„¦}rangesoveronlyafinitenumberofpartitionsofYweshallsaythatthedecomposition(â„¦,Âµ,{Î“i(Â·),Î³i(Â·)}iâˆˆI)isfinitelyThenextlemmasimplystatesthatforametricspace(Y,d)andanarbitraryclosedsub-spaceX,an(Îµ,Î´)-paddeddecompositionofX(withrespecttoitself)canbeextendedtoa(roughly)(Îµ,Î´)-paddeddecompositionofYwithrespecttoX.ThiswillmakeitpossibleforustoplaceassumptionsonlyonX,lettingYbearbitrary.Lemma3.8(Partitionextension).Let(Y,d)beametricspaceandXaclosedsubspaceofY.IfXadmitsafinitelysupported(Îµ,Î´)-paddedâˆ†-boundedstochasticdecomposition(withre-specttoitself),thenYadmitsafinitelysupported(Îµ16+8Îµ,Î´)-padded(1+Îµ2)âˆ†-boundedstochasticdecompositionwithrespecttoX.Proof.Let(â„¦,Âµ,{Î“i(Â·),Î³i(Â·)}iâˆˆI)beafinitelysupported(Îµ,Î´)-paddedâˆ†-boundedstochasticdecompositionofX.ForeverypointxâˆˆY,lettxâˆˆXbesuchthatd(x,tx)â‰¤2d(x,X).Now,foreveryÏ‰âˆˆâ„¦andiâˆˆI,createanewsetbÎ“i(Ï‰)=Î“i(Ï‰)[xâˆˆY:dtx,X\Î“i(Ï‰)â‰¥Îµâˆ†2andd(x,tx)â‰¤Îµâˆ†4.Finally,foranypointxâˆˆY\SiâˆˆIbÎ“i(Ï‰),placexinasingletoncluster{x}.ThisconstitutesafinitelysupporteddistributionoverpartitionsofY.TheselectionfunctioncorrespondingtobÎ“i(Â·)issimplychosentobeÎ³Ì‚i=Î³i,whiletheselectionfunctioncorrespondingtoasingletoncluster{x}isanarbitrarypointtâˆˆXsatisfyingd(t,x)â‰¤2d(x,X).Letusnowshowthattheabovestochasticdecompositionis(Îµ16,Î´)-paddedand(1+Îµ2)âˆ†-bounded.The(1+Îµ2)âˆ†-boundedconditioniseasy;singletonclustershavediameterzero.Forpointsx,yâˆˆbÎ“i(Ï‰),iâˆˆI,wehaved(x,y)â‰¤d(x,tx)+d(tx,ty)+d(y,ty)â‰¤Îµâˆ†4+diamÎ“i(Ï‰)+Îµâˆ†4â‰¤1+Îµ2âˆ†.FixsomexâˆˆYwithd(x,X)â‰¤Îµ16+8Îµ1+Îµ2âˆ†=Îµâˆ†16.Bythedefinitionofpaddeddecompositions,withprobabilityatleastÎ´,dtx,X\Î“i(Ï‰)â‰¥Îµâˆ†forsomeiâˆˆI.Ourgoalwillbetoshowthatinthiscasewehavedx,Y\bÎ“i(Ï‰)â‰¥Îµâˆ†16,whichwillcompletetheproof.AssumetothecontrarythatthereissomeyâˆˆY\bÎ“i(Ï‰)withd(x,y)â‰¤Îµâˆ†16.Observethatd(tx,ty)â‰¤d(tx,x)+d(x,y)+d(y,ty)â‰¤2d(x,X)+Îµâˆ†16+2(d(x,X)+d(x,y))<Îµâˆ†2.Hence,dty,X\Î“i(Ï‰)â‰¥dtx,X\Î“i(Ï‰)âˆ’d(tx,ty)>Îµâˆ†2,Sincewealsohavethatd(y,ty)â‰¤2d(y,X)â‰¤2d(x,X)+2d(x,y)â‰¤Îµâˆ†4,weseethatyâˆˆbÎ“i(Ï‰),whichcontradictsthechoiceofy.Remark3.9.Forlaterapplications,wenotethatifXisÎµâˆ†32-denseinYandÎµ<1,thentheaboveproofshowsthatYadmitsan(Îµ32,Î´)-padded2âˆ†-boundedstochasticdecompositionwithrespecttoitself.Remark3.10.Lemma3.8holdstruewhen3.2ConstructionsInthissection,weconstructstochasticdecompositionsforvariousclassesofmetricspaces.Mostoftheconstructionscomedirectlyfromthetheoreticalcomputerscienceliterature,butsincewearedealingherewithinfinitespaces,wemustbesomewhatSettingt=âˆ†64log[C(X;6âˆ†,âˆ†)]yieldstherequiredresult.Weremarkthatthestochasticdecom-positioncanbemadefinitelysupportedbychoosingRuniformlyfromasufficientlyfinemeshin[âˆ†,2âˆ†].Corollary3.12(Doublingmetrics).Let(X,d)beadoublingmetricspace.Thenforeveryâˆ†>0,thereexistsa1ClogÎ»(X),12-paddedâˆ†-boundedfinitelysupportedstochasticdecompo-sitionofXwithrespecttoitself,whereCisauniversalconstant.Proof.ThisisadirectconsequenceofLemma3.11,sinceitisevidentthatlog[C(X;2âˆ†,âˆ†/4)]=O(logÎ»(X)).Indeed,letNâŠ†Xbeasetsuchthat,foreverydistinctx,yâˆˆN,âˆ†4â‰¤d(x,y)â‰¤2âˆ†.ThenclearlyIn[20],itisshownthatforsomefixedÎ²=Î²(r)andk=r,theaboveprocessproducesapartitionPsuchthatforeveryCâˆˆP,diam(C)â‰¤âˆ†.ImprovedquantitativeboundswereobtainedinIndeed,byaclassicalmeasurableselectiontheoremofKuratowskiandRyll-Nardzewski[21]itisenoughtocheckthatforeveryopenballBâŠ†RdthesetnÏ‰âˆˆâ„¦:Bâˆ©Xâˆ©naâˆˆballsB(x,âˆ†8)forxâˆˆN.SinceÏƒisnon-degenerate,itassignsanysuchballpositivemeasure,andhencewithprobability1,wehavexjâˆˆB(x,âˆ†/8)forsomejâˆˆN.NowfixapointyâˆˆYsuchthatd(y,X)<âˆ†2,andletzâˆˆXbesuchthatd(y,z)<2d(y,X).Observethatziswithinâˆ†4ofsomepointofN,andhencewithin3âˆ†8ofsomexjwithprobability1.Butnowweseethatd(y,xj)â‰¤d(y,z)+d(z,xj)<âˆ†+3âˆ†8<2âˆ†,henceyâˆˆB(xj,R).ItfollowsthattheproposedsetsareindeedapartitionofSwithprobability1.Wedefinethefinalpartitionby{Î“i(Ï‰,R)}âˆi=1[({y}:yâˆˆY\[iâˆˆNÎ“i(Ï‰,R)),andnotethattherequiredselectorsexistduetoanapplicationoftheKuratowski,Ryll-NardzewskiTheoremasintheproofofLemma3.16.FixxâˆˆYsuchthatd(x,X)<âˆ†2anddenotebyÎ½thedistributionoftherandomvariablez7â†’d(z,x),i.e.for0â‰¤Î±<Î²,Î½([Î±,Î²))=Ïƒ({zâˆˆX:Î±â‰¤d(z,x)<Î²}).Fixtâ‰¤âˆ†andforeveryRâˆˆ[2âˆ†,4âˆ†]denotebyDRthesetofallzâˆˆXforwhichB(z,R)âˆ©B(x,t)/âˆˆ{âˆ…,B(x,t)}Observethat(3)holdstriviallyifd(x,y)â‰¥âˆ†.Otherwise,choosingt=d(x,y)in(4)yieldstherequiredresult.4ConstructinggentlepartitionsInthissectionweshowthatthevariousdecompositionsthatwereintroducedintheprevioussectioncanbeusedtoconstructgentlepartitionsofunity.Theorem4.1(Stochasticdecompositionsyieldgentlepartitions).Thereexistsauni-versalconstantC>0suchthatforeverymetricspace(Y,d)andeverysubspaceXâŠ†Ythefollowingassertionsholdtrue:Claim4.2.FixÏ‰âˆˆâ„¦nandassumethatÎ¨(i,Ï‰,x)6=Î¨(i,Ï‰,y).Thend(Î³(i,Ï‰),x)â‰¤d(x,y)+18ÎµÂ·max{d(x,X),d(y,X)}.Proof.OurassumptionimpliesthateitherÎ¨(i,Ï‰,x)>0orÎ¨(i,Ï‰,y)>0.Inthefirstcase,xâˆˆÎ“in(Ï‰)andd(Î³(i,Ï‰),x)â‰¤dÎ³(i,Ï‰),Î“in(Ï‰)+diam(Î“in(Ï‰))â‰¤2dX,Î“in(Ï‰)+2nâ‰¤2d(x,X)+2n.Ontheotherhand,Ï•n(x)>0,sod(x,X)â‰¥Îµ2nâˆ’4,whichimpliestherequiredestimate.Inthesecondcase,Î¨(i,Ï‰,y)>0,sothatd(Î³(i,Ï‰),x)â‰¤d(Î³(i,Ï‰),y)+d(x,y)â‰¤2d(y,X)+diam(Î“in(Ï‰))+d(x,y)â‰¤2d(y,X)+2n+d(x,y)â‰¤18ÎµÂ·d(y,X)+d(x,y).ByClaim4.2wecanestimatetheleft-handsideof(6)and(7)asfollows:XnâˆˆZXiâˆˆIZâ„¦nd(Î³(i,Ï‰),x)Â·|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)â‰¤d(x,y)Â·XnâˆˆZXiâˆˆIZâ„¦nÎ¨(i,Ï‰,x)+Î¨(i,Ï‰,y)dÂµn(Ï‰)+18ÎµÂ·max{d(x,X),d(y,X)}XnâˆˆZXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)=2d(x,y)+18ÎµÂ·max{d(x,X),d(y,X)}XnâˆˆZXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)Itisthereforeenoughtoshowthat:XnâˆˆZXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)â‰¤Câ€²Î´Â·d(x,y)max{d(x,X),d(y,X)},(8)whenthedecompositionsareeither(Îµ,Î´)-paddedor(Îµ,Î´)-thickandXnâˆˆZXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)â‰¤Câ€²1+ÎµÎ´Â·d(x,y)max{d(x,X),d(y,X)},(9)whenthedecompositionsare(Îµ,Î´)-separating.HereCâ€²isauniversalconstant.WemayassumethatCâ€²>4,inwhichcaseinequality(8)(resp.inequality(9))holdstriviallywhend(x,y)â‰¥d({x,y},X).Indeed,inthiscased(x,X)â‰¤d(x,y)+d(y,X)â‰¤2d(x,y)andanalogouslyd(y,X)â‰¤2d(x,y).Hencetheright-handsideof(8)(resp.(9))isgreaterthan2whiletheleft-handsideof(8)(resp.(9))isatmost2sincebyconstructionPOurgoalisthereforetoprove(8)(resp.(9))undertheassumptiond(x,y)<d({x,y},X).Wemayalsoassumewithoutlossofgeneralitythatd(x,X)â‰¥d(y,X).Now,XnâˆˆZXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)=XnâˆˆZZâ„¦nXiâˆˆIÎ¸nÏ‰(x)Ï•n(x)1Î“in(Ï‰)(x)S(y)âˆ’Î¸nÏ‰(y)Ï•n(y)1Î“in(Ï‰)(y)S(x)S(x)S(y)dÂµn(Ï‰)â‰¤XnâˆˆZZâ„¦nXiâˆˆIÎ¸nÏ‰(x)Ï•n(x)1Î“in(Ï‰)(x)âˆ’Î¸nÏ‰(y)Ï•n(y)1Î“in(Ï‰)(y)S(x)dÂµn(Ï‰)+XnâˆˆZZâ„¦nÎ¸nÏ‰(y)Ï•n(y)If,ontheotherhand,therearedistincti,jâˆˆIsuchthatxâˆˆÎ“in(Ï‰)andyâˆˆÎ“jn(Ï‰)thenclearlyÏ€nÏ‰(x),Ï€nÏ‰(y)â‰¤d(x,y),Case3.Thestochasticdecomposition(â„¦n,Âµn,{Î“in(Â·),Î³in(Â·)}iâˆˆI)is(Îµ,Î´)-separating2n-boundedforallnâˆˆZ.Thiscaseissimpler:wetakeÎ¸nDefineÏ•n(x)=Ï•d(x,X)5nâˆ’Mâˆ’4,andlet(â„¦,Âµ),Î¨(i,Ï‰,x),Î³(i,Ï‰),S(x)beasintheproofofTheorem4.1,withÎ¸nÏ‰(x)â‰¡1.Ourgoalistoshowthatforeveryx,yâˆˆY,XnâˆˆZXiâˆˆIZâ„¦nd(Î³(i,Ï‰),x)Â·|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµ(Ï‰)â‰¤OlogmloglogmÂ·d(x,y).Inwhatfollowswefixx,yâˆˆYandwemayassumewithoutlossofgeneralitythatd(x,X)â‰¥d(y,X).AsintheproofofClaim4.2,if|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|>0thend(Î³(i,Ï‰),x)â‰¤5n+d(x,y).theestimate(21)canbewrittenasXnâˆˆZ5nXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµ(Ï‰)â‰¤2MXnâˆˆZ5nZâ„¦nXiâˆˆIÏ•n(x)1Î“Corollary4.5.Ifd(x,y)<d(y,X)thenXnâˆˆZ5nXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµ(Ï‰)â‰¤O52MM2+logmMÂ·d(x,y).UsingCorollary4.4andCorollary4.5withMâ‰ˆloglogmyieldstherequiredresult.5ExtensiontheoremsThefollowingtheoremisadirectconsequenceoftheresultsofSection2,Section3andSec-tion4.Theorem5.1.ThereexistsauniversalconstantC>0suchthat1.ForeverymetricspaceX,ae(X)â‰¤ClogÎ»(X).2.Foreveryr>0andanyKr-excludedmetricspaceX,ae(X)â‰¤CÂ·r2.3.LetMbeatwodimensionalRiemannianmanifoldwithgenusgandXâŠ†M.Thenae(X)â‰¤CÂ·(g+1).4.IfXisann-pointmetricspacethenae(X)â‰¤Clognloglogn.5.ForeveryintegerdandeveryBanachspaceZ,e(â„“d2,Z)â‰¤Câˆšd.Wealsohavethefollowingextensionresultforneighborhoodsofsubsetsofnegativelycurvedmanifolds.Proposition5.2.Fixr>0andletMbeann-dimensionalRiemannianmanifoldsatisfyingRicci(g)â‰¥âˆ’(nâˆ’1)rg,wheregistheRiemannianmetriconM.ThenforanysubsetXâŠ†M,anymetricspaceYâŠ‡XsuchthatXisâˆ†-denseinY,andanyBanachspaceZ,e(X,Y,Z)â‰¤CÂ·n1+âˆšrâˆ†.HereCisauniversalconstant.Proof.Observethatinthiscaseintheproofof4.1weonlyrequiretheexistenceof2n-paddeddecompositionwith2nâ‰¤âˆ†.HencetherequiredresultfollowsfromanapplicationofCorollary3.13andLemma3.8.LetusrecallthatforafamilyoffinitegraphsF,weclaimthatae(hFi)â‰¤KFifandonlyifhFidoesnotcontainallfinitemetrics.WenowgivethesimpleproofwhichisbasedonadeepresultofRobertsonandWearenowinpositiontoproveTheorem1.12whichwasstatedintheintroduction.ProofofTheorem1.12.Webeginwiththecasep=2.LetXbeann-pointsubsetofL2,ZaBanachandweconcludesinceforp>1,EX=Cp<âˆ.Remark5.3.Asstatedintheintroduction,itwasaskedin[17]and[18]whetherforeveryBanachspaceX,supnen(L23.Foreveryx,yâˆˆY,x6=y,Zâ„¦|Î¨(Ï‰,x)âˆ’Î¨(Ï‰,y)|dÂµ(Ï‰)â‰¤LÂ·d(x,y)d(x,y)+max{d(x,X),d(y,X)}.ThefollowinglemmaisavariantofTheorem6.2.ForeveryÎµ,Î´âˆˆ(0,1),everymetricspace(Y,d)andeverysubspaceXâŠ†Ythefollowingassertionsholdtrue:1.IfforeverynâˆˆZ,Yadmitsan(Îµ,Î´)-thick2n-boundedstochasticdecompositionwithrespecttoX,thenYalsoadmitsa36Îµ,680Î´-gentlepartitionofunitywithrespecttoX.2.IfforeverynâˆˆZ,Yadmitsan(Îµ,Î´)-padded2n-boundedstochasticdecompositionwithrespecttoX,thenYalsoadmitsa36Îµ,680Î´-gentlepartitionofunitywithrespecttoX.3.IfforeverynâˆˆZ,Yadmitsan(Îµ,Î´)-separating2n-boundedstochasticdecompositionwithrespecttoX,thenYalsoadmitsa36Îµ,1601+ÎµÎ´-gentlepartitionofunitywithrespecttoX.Proof.SincetheproofisastraightforwardmodificationoftheproofofTheorem4.1,wewillonlysketchthenecessarychanges.Asbefore,foreverynâˆˆZlet(â„¦n,Âµn,{Î“in(Â·),Î³in(Â·)}iâˆˆI)bea2n-boundedstochasticdecompositionofYwithrespecttoX.LetÏ•:Râ†’R+beany2-Lipschitzmapwithsupp(Ï•)âŠ‚[12,4]andÏ•â‰¡1on[1,2].DefineÏ•n(x)=Ï•d(x,X)Îµ2nâˆ’3andlet(â„¦,Âµ)bethedisjointunionof{IÃ—â„¦n}nâˆˆZ(wherethemeasureonIisthecountingmeasure).Thepartitionofunitywhichweconstructhasthefollowingform:ForeverynâˆˆZ,Ï‰âˆˆâ„¦n,iâˆˆIandxâˆˆYdenote:Î¨(i,Ï‰,x)=1S(x)Î¸nÏ‰(x)Ï•n(x)1Î“in(Ï‰)(x),(26)whereforeverynâˆˆZandxâˆˆYthefunctionÏ‰7â†’Î¸nÏ‰(x)âˆˆ[0,âˆ)isÂµn-integrableandS(x)=XnâˆˆZXiâˆˆIZâ„¦nÎ¸nÏ‰(x)Ï•n(x)1Î“in(Ï‰)(x)dÂµwhenthedecompositionsareeither(Îµ,Î´)-paddedor(Îµ,Î´)-thickandXnâˆˆZXiâˆˆIZâ„¦n|Î¨(i,Ï‰,x)âˆ’Î¨(i,Ï‰,y)|dÂµn(Ï‰)â‰¤1601+ÎµÎ´Â·d(x,y)d(x,y)+max{d(x,X),d(y,X)},whenthedecompositionsare(Îµ,Î´)-separating.FromhereontheproofisexactlyasintheproofofTheorem4.1.Lemma6.1,Theorem6.2andtheresultsofSection3.2implytheextensionresultsstatedintheintroduction,inthecasewhenthetargetspaceZisacompletebarycentricmetricspace.TheaboveargumentdoesnotyieldasimilargeneralizationofTheorem1.10,sincetheconstructionofTheorem4.3doesnotimplyasatisfactoryboundasincondition2inthedefinitionofa(K,L)gentlepartitionofunity.AninspectionoftheproofofLemma2.1showsthatwehaveonlyusedthefollowingpropertyoftheBanachspaceZ:Thereexistsamapc:MboundedZâ†’Zsuchthatc(Î´z)=zforeveryzâˆˆZandforeveryÂµ,Î½âˆˆMboundedZandpâˆˆZ,dZ(c(Âµ),c(Î½))â‰¤CZZd(p,z)d|Âµâˆ’Î½|(z),(27)whereCisaconstant(dependingonZ).ThisinequalityholdstrueinBanachspaces[7]M.Charikar,C.Chekuri,A.Goel,S.Guha,andS.A.Plotkin.Approximatingafinitemetricbyasmallnumberoftreemetrics.InProceedingsofthe39thAnnualSymposiumonFoundationsofComputerScience,1998.[8]J.Fakcharoenphol,C.Harrelson,S.Rao,andK.Talwar.Animprovedapproximationalgorithmforthe0-extensionproblem.InProceedingsofthe14thAnnualACM-SIAMSymposiumonDiscreteAlgorithms.ACM,2003.[9]J.Fakcharoenphol,S.Rao,andK.Talwar.Atightboundonapproximatingarbitrarymetricsbytreemetrics.In35thAnnualACMSymposiumonTheoryofComputing.ACM,2003.[10]J.FakcharoenpholandK.Talwar.Animproveddecompositiontheoremforgraphsexclud-ingafixedminor.In7thInternationalWorkshoponRandomizationandApproximationTechniquesinComputerScience.Springer-Verlag,2003.[11]M.Gromov.Asymptoticinvariantsofinfinitegroups.InGeometricgrouptheory,Vol.2(Sussex,1991),volume182ofLondonMath.Soc.LectureNoteSer.,pages1â€“295.CambridgeUniv.Press,Cambridge,1993.[12]M.Gromov.MetricstructuresforRiemannianandnon-Riemannianspaces.BirkhaÌˆuser,Boston,1999.[13]M.Gromov.Randomwalkinrandomgroups.Geom.Funct.Anal.,13:73â€“146,2003.[14]A.Gutpa,R.Krauthgamer,andJ.R.Lee.Boundedgeometries,fractals,andlow-distortionembeddings.InProceedingsofthe44thAnnualSymposiumonFoundationsofComputerScience,2003.[15]J.Heinonen.Lecturesonanalysisonmetricspaces.Universitext.Springer-Verlag,NewYork,2001.[16]F.John.Extremumproblemswithinequlitiesassubsidiaryconditions.CourantAnniver-saryVolume.Interscience,NewYork,pages187â€“204â€“245,1948.[17]W.B.JohnsonandJ.Lindenstrauss.ExtensionsofLipschitzmappingsintoaHilbertspace.InConferenceinmodernanalysisandprobability(NewHaven,Conn.,1982),volume26ofContemp.Math.,pages189â€“206.Amer.Math.Soc.,Providence,RI,1984.[18]W.B.Johnson,J.Lindenstrauss,andG.Schechtman.ExtensionsofLipschitzmapsintoBanachspaces.IsraelJ.Math.,54(2):129â€“138,1986.[19]M.D.Kirszbraun.UÌˆberdiezusammenziehendenundLipschitzchenTransformationen.Fund.Math.,(22):77â€“108,1934.[20]P.Klein,S.A.Plotkin,andS.Rao.Excludedminors,networkdecomposition,andmulticommodityflow.In25thAnnualACMSymposiumonTheoryofComputing,pages682â€“690,May1993.[21]K.KuratowskiandC.Ryll-Nardzewski.Ageneraltheoremonselectors.[22]U.Lang.Extendabilityoflarge-scaleLipschitzmaps.Trans.Amer.Math.Soc.,351(10):3975â€“3988,1999.[23]U.Lang,B.PavlovicÌ,andV.Schroeder.ExtensionsofLipschitzmapsintoHadamardspaces.Geom.Funct.Anal.,10(6):1527â€“1553,2000.[24]J.R.LeeandA.