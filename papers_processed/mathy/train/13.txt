ComparingClusterings–AnAxiomaticViewMarinaMeilămmp@stat.washington.eduUniversityofWashington,Box354322,Seattle,WA98195-4322AbstractThispaperviewsclusteringsaselementsofalattice.Distancesbetweenclusteringsareanalyzedintheirrelationshiptothelattice.Fromthisvantagepoint,wefirstgiveanax-iomaticcharacterizationofsomecriteriaforcomparingclusterings,includingthevaria-tionofinformationandtheunadjustedRandindex.Thenwestudyotherdistancesbe-tweenpartitionsw.r.ttheseaxiomsandproveanimpossibilityresult:thereisno“sensi-ble”criterionforcomparingclusteringsthatissimultaneously(1)alignedwiththelatticeofpartitions,(2)convexelyadditive,and(3)bounded.1.IntroductionThispaperviewsclusteringsaselementsofalattice,thenaturalalgebraicstructureforthepartitionsofaset.Acriterionforcomparingclusteringsisthusseenasafunctionofpairsofelementsinthelattice.Thegoalindoingthisistocontributetothebetterunderstandingofthespaceofallclusteringsofasetandoftheproblemofcomparingclusterings.Thistaskisisanimportantcomponentintheevalua-tionofclusteringalgorithms.Aclustering,oraclus-teringalgorithm,canbeevaluatedbyinternalcrite-ria,e.gdistortion,likelihood,thataregenerallyprob-lemandalgorithmdependent.Thereisanotherkindofevaluation,calledexternalevaluation,thatsimplyComparingClusterings–AnAxiomaticViewLetthenumberofdatapointsinDandinclusterCkbenandnkrespectively.Wehave,ofcourse,thatn=PKk=1nk.Wealsoassumethatnk≥1;inotherwords,thatKrepresentsthenumberofnon-emptyclusters.LetasecondclusteringofthesamedatasetDbeC0={C01,C02,...C0K0},withclustersizesn0k0.Thetwoclusteringsmayhavedifferentnumbersofclusters.TocompareCandC0istodefineasymmetric,non-negativefunctiond(C,C0)thatmeasureshowdifferentarethetwoclusterings.IfC=C0thend(C,C0)=0.Weshallcallthefunctiondadistancealthoughingeneralitmaynotsatisfythetriangleinequality.Ifthetriangleinequalityissatisfied,thendiscalledametric.Itshouldalsobenotedthatthisdefinitionisnotalignedtothemajorityofclusteringcomparisoncri-teria,liketheRand(Rand,1971),Fowlkes-Mallows(Fowlkes&Mallows,1983)andotherindices.Thesearetakingvaluesin[0,1],withlargervaluesastheclusteringsbecomemoresimilar(andbeing1whenC=C0).Thiswillnotprecludeustoconsidertheseindices,asonecanturnanyindexi(C,C0)intoadis-tancebysimplysettingd(C,C0)=1−i(C,C0).ThenumberofpointsintheintersectionofclustersCkofCandC0k0ofC0isdenotednkk0.nkk0=|Ck∩C0k0|Adistancedbetweenthatdependsonlyontherelativevaluesnkk0/nanddoesnotdirectlydependonnissaidtoben-invariant.ThelatticeofpartitionsOnecanrepresentallclus-teringsofafinitesetDasthenodesofagraph,asillustratedbyfigure1;inthisgraphanedgebetweenC,C0willbepresentifC0isobtainedbysplittingaclus-terofCintotwoparts.ThesetofallclusteringsofadatasetDformsalatticecalledthelatticeofpartitions(Stanley,1997).ThegraphjustdescribedisknownastheHassediagram1ofthislattice.Atthetopofthediagramistheclusteringwithjustonecluster,denotedby1̂={D}.Atthebottomis0̂={{1},{2},...{n}}theclusteringwithnclusterseachComparingClusterings–AnAxiomaticView{a,b,c,d}{a}{b,c,d}{b}{a,c,d}{c}{a,b,d}{d}{a,b,c}{a,b}{c,d}{a,c}{b,d}{a,d}{b,c}{a},{b}{c,d}{a},{c}{b,d}{a},{d}{b,c}{a,b}{c},{d}{a,c}{b},{d}{a,d}{b},{c}{a},{b}{c},{d}Figure1.ThelatticeofpartitionsofD={a,b,c,d}.Notethat1̂={{a,b,c,d}},0̂={{a},{b},{c},{d}};theclusterings1̂,{{a},{b,ComparingClusterings–AnAxiomaticViewthe“ascending”segmentC×C0,C0.Figure1showsanexampleofsuchastraightline.Moreover,usingbothproperties,onecanderivethattheunionofanytwochainsthathavethesameendpointsformsa“closed”straightlineaccordingtosuchametric.3.TheaxiomsofthevariationofinformationThevariationofinformation(dVI),introducedin(Meilă,2003),measuresthedistancebetweentwoclus-teringsintermsoftheComparingClusterings–AnAxiomaticViewfinedasiR(C,C0)=n(n−1)−2Ndisagree(C,C0)n(n−1)(8)ThereforethecharacterizationofdMbelowwillreflectimmediatelyonthe(unadjusted)Randindex.InwhatfollowsweshalluseanrescaledformoftheMirkinmetricwhichisn-invariantandbounded.dM(C,C0)=d0M(C,C0)n2(9)TheVanDongencriterionwasalsoprovedtobeametric(vanDongen,2000)d0D(C,C0)=2n−Xkmaxk0nkk0−Xk0maxknkk0(10)AswiththeMirkinmetric,weshalluseitsboundedn-invariantversiondD(C,C0)=d0D(C,C0)2n(11)Toproceedwithouraxiomaticstudy,wefirstcomputethedistancesbetween1̂andCUKundertheinvariantVanDongenandMirkinmetrics.dD(1̂,CUK)=121−1KdM(1̂,CUK)=1−1KWithrespecttoconvexadditivity,itiseasytoprove(seealso(Meilă,2003))thatdDisconvexelyadditive,whiletheMirkinmetricsatisfiesdM(C,C0)=KXk=1n2kn2dM(1̂nk,C0k)(12)wheneverC0isarefinementofCandC0krepresentsthepartitioninginducedbyC0onclusterCkofC.WenowcanreplacethescaleaxiomsofdVIwithax-iomscorrespondingtodDanddMrespectively.WeobtainanegativeTheorem2ThereisnoclustercomparisoncriterionthatsatisfiesaxiomsA1–A4andA5.Dd(1̂,CUK)=1−1/KTheorem3TheuniqueclustercomparisoncriteriondthatsatisfiesaxiomsA1,A3,A4,andA2.Dd(1̂,C)=12h1−maxknkniistheinvariantvanDongenmetricdD.Theorem4TheuniqueclustercomparisoncriteriondthatsatisfiesaxiomsA1–A3,A5.DandA4.MLetC0bearefinementofCanddenotebyC0ktheclusteringinducedbyC0onCk∈C.Thend(C,C0)=KXk=1n2kn2d(1̂nk,C0k)istheinvariantMirkinmetricdM.Thus,theinvariantMirkinmetricisalsoalignedwiththelatticeofpartitions.TheadditivityaxiomA4.Mhasseveralconsequences.First,itshowsthatdMislo-cal,i.echangesinsideoneclusterdependonlyontherelativesizeofthatclusterandofthenatureofthechange,andarenotaffectedbyhowtherestofthedatasetispartitioned.Buttheunionoftwoormoredatasetsshrinksdistances(becauseoftheweightingwiththesquaresoftheproportions),arathercounter-intuitivebehavior.ItisworthrecallingthatallthesepropertiesoftheMirkinmetricarereadilytranslatedintosimilarpropertiesoftheunadjustedRandindex.The“unnatural”behavioroftheRandindexwithin-creasingKhasbeennotedearlyonandisthemainreasonwhythisindexisusedmostlyinitsadjustedform(Hubert&Arabie,1985).ThevanDongenmetricishorizontallyalignedwiththelatticeofpartitionsbutnotvertically,thatisitsatisfiesaxiomsA1,A3,A4,A5.D.Touniquelycharacterizeit,weintroducedaxiomA2.D,whichimpliesA5.Dbutissignificantlystronger4.Howaboutother,morepopularindicesforcomparingpartitions?Thespacedoesnotpermitustodescribeandcompareallofthemhere(suchcomparisonscanbefoundin(Ben-Huretal.,2002;Hubert&Arabie,1985;Meilă,2003;Wallace,1983)andothers).Onefactshownin(Meilă,2003)isthattheJaccard,Fowlkes-Mallows,someoftheHuberandArabieandalltheadjustedindices,includingthewidelyusedadjustedRandindex,arenon-local(thatis,achangeinsideasingleclustercountsdifferentlydependingonhowtherestofthedataisclustered).Thereforetheywillrateworseonthescaleofunderstandabilityandinpar-ticularcannotsatisfytheconvexadditivityproperty.Also,itiseasytoshowthatmostoftheabovein-dicesareonlyasymptoticallyn-invariant,sotheirax-iomaticdescriptionwouldbemuchmorecomplicated(andconsequentlyamuchlessilluminatingexercise).4WehavenotprovedthatA2.DistheweakestpossibleaxiomthatuniquelydeteriminesdComparingClusterings–AnAxiomaticViewAnotherveryinterestingcriterion,theclassificationer-ror,isdiscussedinthenextsection.5.TheclassificationerrormetricTheclassificationerror(CE)distancedCEisdefinedasdCE(C,C0ComparingClusterings–AnAxiomaticViewNotehoweverthatacriterionthatisboundedbetween0and1carriestheimplicitassumptionthatcluster-ingscanonlygetnegligiblymorediverseasthenumberofclustersincreases.Thus,whileusingComparingClusterings–AnAxiomaticViewProofofTheorems3and4TheseproofsfollowthesamestepsastheproofofTheorem1andarethereforeomitted.ProofofTheorem6Wehaveconsecutively:d(1̂,0̂)=h(n)byA5.H(25)d(1̂,C)=h(n)−d(0̂,C)byA2(26)d(0̂,C)=Xknknh(nk)byA4(27)d(1̂,CUK)=h(n)−d(0̂,CUK)(28)=h(n)−K1Kh(nK)(29)Sincen/K=Misaninteger,andrecallingA5.Hwecanrewritethelastequalityash(K)=h(KM)−h(M)orequivalentlyh(KM)=h(K)+h(M)(30)for