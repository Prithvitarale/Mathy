Proceedingsofthe57thAnnualMeetingoftheAssociationforComputationalLinguistics,pages747–763Florence,Italy,July28-August2,2019.c2019AssociationforComputationalLinguistics747Errudite:Scalable,Reproducible,andTestableError748ABCDEFFigure1:TheErruditeinterface,with(A)modeloverview;(B)attributehistograms(§4,enlargedversioninFigure5);(C)filteringpanelforuserstospecifyDSLqueries(§3.1),(D)instancelistdisplayingfilteredexamples;(E)listofsavedgroups(§3.2andFigure3)and(F)rewriterules(§3.3).See§4formoredetails.2Q:Whocreatedthe2005themeforDoctorWho?...JohnDebneycreatedanewarrangementofRonGrainer’soriginalthemeforDoctorWhoin1996.Forthereturnoftheseriesin2005,MurrayGoldprovidedanewarrangement...featuredsampledfromthe1963original.Figure2:AnexampleMCerrorwiththegroundtruthandthepredictionbothbeing“PERSON”entities.Figure2illustratesanincorrectpredictionfromamachinecomprehension(MC)modelthatcouldbecausedbythepresenceofadistractorentitywiththesame7492Task,Dataset,andModelWhileourproposederroranalysisprinciplesandtoolaremodelandtaskagnostic,wedescribeandevaluatetheminthecontextofMachineCompre-hension(MC).MCsystemsaim750FunctionNameDefinitionDSLCodeandresultingOutputValuessentence,tokenExtractorsfordesiredspansfromtargets—sentencesorsub-phrases.sentence(g)→Forthereturnof...token(c,pattern="PERSON")→[John,...]exactmatch,f1,iscorrectsentPerformancefunctionsthatmeasurediffer-entlevelsofcorrectness.f1(m)==0,exactmatch(m)==0iscorrectsent(m)==FalselengthLengthofthetarget.length(q)==9,length(g)==2POS,ENT,LEMMATokensinthetargetthathavecertainpatternsofPOStags,namedentity,etc.ENT(g,getroot=True)=="PERSON"haspattern,startswith,endswithTocheckwhetherthetargetcontainscer-tainpattern.patternautomatically751quiresanswerstocounterfactualquestions,suchas“Ifthepredicteddistractorwasnotthere,wouldthemodelpredictcorrectly?”Erruditeallowsmanualeditingofindividualexamples(i.e.,changingtheinputarbitrarily),acommonpracticetoverifyifthesuspectederrorcausesarereallycauses.Whileusefulforquickspottestsonsingleinstances,manualeditingdoesnotscale.Forscalablecounterfactualanalysis,Er-ruditeusesrulestorewriteallrelevantinstanceswithinagroup–similartosearchandreplacebutwiththeflexibilityandpoweroftheErruditeDSL.Arewriteruleisspecifiedusingthesyntaxrewrite(target,from→to),wheretargetin-dicatesthepartoftheinstancethatshouldberewrittenbyreplacingfromwithto.Bothfromandtocanincludelinguisticannotations,inALLCAPS.Aruletoreplace“Who”followedbyaverbwith“Whatperson”followedbythesameverbiswrittenasrewrite(q,"whoVERB"→"whatpersonVERB").Forconvenience,Erruditealsoincludesdefaultrulessuggestedinformativein-terviewswithMCexperts,suchas“removeallsentencesexcepttheonethatcontainsthegroundtruth”,and“replacepronouns(he)withrawref-erences(JohnSmith)fromacoreferencemodel.”Returningtoourdistractorexample,wecanverifywhetherdistractorsarecausingmistakesbyusingarewriteruleontheisdistractedgroup,replacingthepredicteddistractorwithanon-entity,placeholdertoken"#":rewrite(c,STRING(p(m))→"#").Predictionspanremainsfixed,45instances(23%)HowmanyofJacksonville’scityresidentsareyoungerthan18?...with23.9%undertheageof18,10.5%#from18to24...HowmanykilometersisWarsawfromtheCarpathianMountains?Warsawliesineast-centralPolandabout300km(190#mi)from...Predictionchangestocorrect,91instances(48%)Predictionchangesbutremainsincorrect,56instances(29%)AQ:C:Q:C:Q:C:Whocreatedthe2005themeforDoctorWho?...JohnDebney#createdanewarrangementofRonGrainer’s...MurrayGoldprovidedanewarrangement...#BCFigure4:Updatedpredictioninresponsetotherewriterulerewrite(c,STRING(p(m))→"#").TheresultsfromtherewriterulearepresentedinFigure4.Themodelpredictsthesamespan(nowcontainingthemeaninglesstoken"#")23%ofthetime(A),changestothecorrectspan48%(B)ofthetimeandpredictsadifferentwrongspan29%ofthetime(C).WhilecaseBindicatesthatthedistractorwasindeedcausingamisprediction,CountDATEPERSONORGCARDINALGPENORPMONEYPERCENTQUANTITYLOCother020400500CountGroup:is_entityGroup:is_distracted(a)Groundtruthentitytypes(b)Figure5:ThedistributionofENT(g)ingroup(a)isentityand(b)isdistracted.Thehistogramshowstheabsolutefrequencyandincorrect/correctra-tioforeachattributevalue.incaseAitseemsotherfactorsareatplay.IncaseC,furtheranalysisindicatesthatthepredictedspanisalmostalwaysadifferentdistractor(i.e.,hasthesameentitytype).Thus,whileBiDAFisfairlyaccuratewhenthedistractorsarepresentandtheentitytypeismatched(88%),whenitisincor-rect,itseemsdistractorsareindeedconfusingthemodel.Thiskindofanalysisisrarelyseen(ifatall)intheliterature;yetithelpsusersdevelopin-sightsnotavailablethroughdatagrouping.4InteractiveUserInterfaceWenowwalkthroughtheinteractiveinterfaceofErruditeinmoredetail.Theinterfacenotonlyin-tegratestheentireanalysisprocess,butalsopro-videsadditionalexplorationsupportsuchasvi-sualizingdatadistributions,suggestingpotentialqueries,andpresentingthegroupingandrewritingresults.Whilenotstrictlynecessaryfortheerroranalysisprinciplespreviouslyoutlined,itmakestheirapplicationmuchmorestraightforwardbyhelpingusersformulateandinspecttheirhypothe-sesinrealtime,andatscale(P2).Attributedistribution.Toguidetheexplo-ration,groupcreationandrefinement,Erruditesupportsdefiningcomplexattributesandinspect-ingtheirdistributions.AnexampleinFigure5showsthehistogramofgroundtruthentitytypes.Itdisplaystherelativefrequencyofdifferenten-tityanswers,aswellastheproportionofincor-rectpredictions.Thehistogramsareupdatedtoshowconditionaldistributionswhenauserselectsagroup.Figure5(a)showshistogramsforthegroundtruthentitytypeinthegroupisentity:whentheanswerisanentity,itismostoftenaDATE,752isdistracted.Wenotethatthefrequencyof“distraction”mistakesforPERSONandCARDI-NALarehigher,whilelowerforORG,relativetothebasefrequenciesinFigure5(a),aninsightthatmaywarrant7530%10%20%30%40%50%ErrorCoverageBoundaryMulti-sentenceGroupFigure7:Percentageoferrorscoveredbyuser-definedgroups:Boundary(µ=30.9%,σ=10.5%)andMulti-sentence(µ=13.5%,σ=8.29%).Thedispersionofgreyticksshowsthatuserscomeupwithdifferentdef-initionsforgroupsdescribedbySeoetal.(2016),evenwhentheythinktheyreplicatedthegroupfaithfully.(2)toassessthereproducibilityofcurrentad-hocerroranalysismethods.Seoetal.(2016)manu-allylabeled50instancespredictedincorrectlybyBiDAFintodifferenterrorgroups.Weaskedpar-ticipantstogeneralizethesegroupstothewholevalidationsetafterreadingtherelevantsectioninSeoetal.(2016).Forlearningpurposes,wefirstaskeduserstoinspecttwodatagroupsthatwecreatedusingErrudite,andevaluateiftheycap-turedthesamesemanticsastheoriginalgroup:in-correctpreprocessing(Preprocess)andparaphraseproblems(Paraphrase).UsersthencreatedtheirowngroupstoreplicatetwoothersfromSeoetal.(2016):impreciseanswerboundaries(Boundary)andmulti-sentenceissues(Multi-sentence).Results.Participantsratedtheaccuracyofthereplicationofeachgroupafterseeingavarietyofexamples,i.e.,“howclosetheapproximationmatchesthepaperdefinition.”Forthegroupswewrotequeriesfor,participantswereconfidentthatPreprocesswasaccurate(µ=4.3,σ=0.64),butambivalenttowardsParaphrase(µ=3.1,σ=0.54).Participants’commentsindicatedtheam-bivalencedidnotcomefromErrudite:6partic-ipantsdisagreedwiththeexamplegivenbySeoetal.(2016),andparticipantswhogavelowrat-ingsfoundParaphraseitselftoofuzzyandcon-fusingtoformalize.Despitebeingusedwidelyasanerrorgroup(KunduandNg,2018;Chenetal.,2016),participantshadconflictingunderstandingsofParaphrase,eitheras“thequestionandthegroundtruthsentencearesemanticallysimilarbutwithgreatlexicalvariations”,or“thepredictedan-swerisaparaphrasedversionofthegroundtruth.”Whenreplicatinggroupsthemselves,partici-pantswereabletoexpressthequeriestheywanted.Participantswerenotveryconfidentintheaccu-racyoftheirproducedMulti-sentencegroup(µ=2.8,σ=1.32),forreasonssimilartoParaphrase:theythoughtthegroupwasunder-specifiedintheD1D2D1D2...commercial,scientific,andculturalgrowth......thepolynomialtimehierarchycollapses....believedthatthepolynomialhierarchydoes......fromKarakoruminMongoliatoKhanbaliq...(a)(b)(c)D2D1Figure8:Exampleinstancesthatfallintodifferentuser-definedBoundarygroups.originalanalysis.Moreinterestingly,userswerethemostconfidentinthefidelityofanapparently“easy”groupBoundary(µ=4.8,σ=0.60),yetthegroupstheyproducedwerewildlydifferent(Fig-ure7).Whileuserswereabletoexpresswhattheythoughtwasmeantby“impreciseerrorbound-aries”,theyapplieddifferentdefinitions.Forexample,oneuserdefinedthegroupas(D1)“thepredictedspancanbeoffbyatmosttwoto-kensbothontheleftandright”(yielding22.1%ofallBiDAFerrors),whileanotherdefineditas(D2)“thereisnoexactmatchbuthighoverlap—F1ishigherthan0.7”(yielding13.8%ofaller-rors).Figure8showssamplesthatfitthetwodef-initionsorjustoneofthem.Erruditemakesthedifferentinterpretationsexplicit.TheauthorofD2observedexampleslikeFigure8(c)inhissamples,butdecidedultimatelythatwhatmatteredwasjustthereturnedshorttext,notthespanindex.Incon-trast,D1’sauthorcarefullyrefinedhisinitialquerypreciselytoruleoutcaseslikeFigure8(c).Insummary,userswereabletoexpresstheirin-tendedgroupswellwithErrudite,buttheywereunabletoconsistentlyreplicatetheanalysisofSeoetal.(2016)—evenwhentheythoughttheydid—duetotheambiguityinherentinmanualgrouping.5.2Task2:ExplorationToassesstheusefulnessofErrudite,weletpar-ticipantsfreelyanalyzeBiDAF.Weaskedthemto“thinkaloud”inrealtime,vocalizingtheirhy-potheses,intriguingobservations,objectives,andexpectations.Attheendofthesession,subjectsratedeachoftheirdiscoveredinsightsintermsof(1)importance(verytrivialtoveryhelpful),(2)confidenceininsightcorrectness,and(3)relativeeaseofdiscoverycomparedtoexistingmethods.Results.Allparticipantsfoundatleastonein-sightbybuildingsemanticallymeaningfulgroupsorrewriterules.Onaverage,subjectsreportedµ=2.1findings(σ=0.94).SomeinsightsconfirmedpriorhypothesesaboutBiDAFmoreformally,in-creasingusers’confidence.Forexample,oneusercreateda75412345RateAttributeSuggestionRewriteQueryUsefulnessFigure9:Usefulnessoffunctionmodulesinthetool.occurwhenthereissignificantoverlapbetweenthequestionandasentencethatdoesnotcontainthegroundtruth.Indeed,thatgroupaccountsforabout18%ofBiDAFerrors.Otherinsightsex-tendedpreviousknowledge,suchasexplorationsbytwouserswhoexaminedlowperformanceon“why”questions(AppendixA.4).Theyalsore-jectedsomepriorhypothesesafterusingErrudite,suchasthedistractorcasein§3.Participantsratedtheirfindingstobeimportant(µ=3.7,σ=1.12),wereconfident755hand,andthusitistobeexpectedthatuserswouldreverttocoarseandeasy-to-programgroups.Erru-diteemphasizescustomization:itallowsuserstodefineextractorsforrichinstanceattributes,andhelpsthemadjusttheirgroupsinreal-timewithquicktrialanderror,visualizations,andsugges-tionsbasedonprogramming-by-demonstration.6.2CounterfactualAnalysisCounterfactualattackstomodelshavetakenvar-iousforms,e.g.,byaddingdistractingsentencestothecontextinMC(JiaandLiang,2017),orfeedingpartial756ReferencesAishwaryaAgrawal,DhruvBatra,andDeviParikh.2016.Analyzingthebehaviorofvisualquestionan-sweringmodels.arXivpreprintarXiv:1606.07356.BettyvanAken,JulianRisch,RalfKrestel,andAlexanderLöser.2018.Challengesfortoxiccom-mentclassification:Anin-deptherroranalysis.arXivpreprintarXiv:1809.07572.StanislawAntol,AishwaryaAgrawal,JiasenLu,Mar-garetMitchell,DhruvBatra,CLawrenceZitnick,andDeviParikh.2015.Vqa:Visualquestionan-swering.InProceedingsoftheIEEEinternationalconferenceoncomputervision,pages2425–2433.JosephCheeChang,SaleemaAmershi,andEceKa-mar.2017.Revolt:Collaborativecrowdsourcingforlabelingmachinelearningdatasets.InProceedingsofthe2017CHIConferenceonHumanFactorsinComputingSystems,pages2334–2346.ACM.DanqiChen,JasonBolton,andChristopherDMan-ning.2016.Athoroughexaminationofthecnn/dailymailreadingcomprehensiontask.arXivpreprintarXiv:1606.02858.Nan-ChenChenandBeenKim.2017.Qsanglyzer:Vi-sualanalyticsforprismaticanalysisofquestionan-sweringsystemevaluations.InProceedingsoftheIEEEConferenceonVisualAnalyticsScienceandTechnology.YeounohChung,TimKraska,NeoklisPolyzotis,KiHyunTae,andStevenEuijongWhang.2018.Automateddataslicingformodelvalidation:abigdata-aiintegrationapproach.ChristopherClarkandMattGardner.2017.Simpleandeffectivemulti-paragraphreadingcomprehen-sion.arXivpreprintarXiv:1710.10723.AnthonyFader,LukeZettlemoyer,andOrenEtzioni.2013.Paraphrase-drivenlearningforopenquestionanswering.InProceedingsofthe51stAnnualMeet-ingoftheAssociationforComputationalLinguistics(Volume1:LongPapers),volume1,pages1608–1618.ShiFeng,EricWallace,AlvinGrissomII,PedroRodriguez,MohitIyyer,andJordanBoyd-Graber.2018.Pathologiesofneuralmodelsmakeinterpreta-tiondifficult.InEmpiricalMethodsinNaturalLan-guageProcessing.MattGardner,JoelGrus,MarkNeumann,OyvindTafjord,PradeepDasigi,NelsonF.Liu,MatthewPeters,MichaelSchmitz,andLukeS.Zettlemoyer.2017.Allennlp:Adeepsemanticnaturallanguageprocessingplatform.SumitGulwaniandPrateekJain.2017.Programmingbyexamples:Plmeetsml.InAsianSymposiumonProgrammingLanguagesandSystems,pages3–20.Springer.LuhengHe,KentonLee,MikeLewis,andLukeZettle-moyer.2017.Deepsemanticrolelabeling:Whatworksandwhat’snext.InProceedingsofthe55thAnnualMeetingoftheAssociationforComputa-tionalLinguistics(Volume1:LongPapers),vol-ume1,pages473–483.MinghaoHu,YuxingPeng,ZhenHuang,NanYang,MingZhou,etal.2018.Read+verify:Machinereadingcomprehensionwithunanswerableques-tions.arXivpreprintarXiv:1808.05759.RobinJiaandPercyLiang.2017.Adversarialexam-plesforevaluatingreadingcomprehensionsystems.arXivpreprintarXiv:1707.07328.MandarJoshi,EunsolChoi,DanielSWeld,andLukeZettlemoyer.2017.Triviaqa:Alargescaledistantlysupervisedchallengedatasetforreadingcomprehen-sion.arXivpreprintarXiv:1705.03551.KushalKafleandChristopherKanan.2017.Ananal-ysisofvisualquestionansweringalgorithms.InComputerVision(ICCV),2017IEEEInternationalConferenceon,pages1983–1991.IEEE.MinsukKahng,PierreYAndrews,AdityaKalro,andDuenHorngPoloChau.2018.Activis:Visualexplorationofindustry-scaledeepneuralnetworkmodels.IEEEtransactionsonvisualizationandcomputergraphics,24(1):88–97.SeanKandel,AndreasPaepcke,JosephHellerstein,andJeffreyHeer.2011.Wrangler:Interactivevi-sualspecificationofdatatransformationscripts.InProceedingsoftheSIGCHIConferenceonHumanFactorsinComputingSystems,pages3363–3372.ACM.VahidKazemiandAliElqursh.2017.Show,ask,at-tend,andanswer:Astrongbaselineforvisualques-tionanswering.arXivpreprintarXiv:1704.03162.SouvikKunduandHweeTouNg.2018.Aquestion-focusedmulti-factorattentionnetworkforquestionanswering.InThirty-SecondAAAIConferenceonArtificialIntelligence.TessaA.Lau,StevenA.Wolfman,PedroM.Domin-gos,andDanielS.Weld.2003.Programmingbydemonstrationusingversionspacealgebra.Ma-chineLearning,53:111–156.GyeongbokLee,SungdongKim,andSeung-wonHwang.2018.Qadiver:Interactiveframe-workfordiagnosingqamodels.arXivpreprintarXiv:1812.00161.XinLiandDanRoth.2002.Learning757XiaodongLiu,YelongShen,KevinDuh,andJian-fengGao.2017.Stochasticanswernetworksformachinereadingcomprehension.arXivpreprintarXiv:1712.03556.SewonMin,MinjoonSeo,andHannanehHajishirzi.2017.Questionansweringthroughtransferlearn-ingfromlargefine-grainedsupervisiondata.arXivpreprintarXiv:1702.02171.SewonMin,VictorZhong,RichardSocher,andCaim-ingXiong.2018.Efficientandrobustquestionansweringfromminimalcontextoverdocuments.arXivpreprintarXiv:1805.08092.PramodKaushikMudrakarta,AnkurTaly,MukundSundararajan,andKedarDhamdhere.2018.Didthemodelunderstandthequestion?arXivpreprintarXiv:1805.05492.JakobNielsen.1994.Usabilityengineering.Elsevier.DanROlsenJr.2007.Evaluatinguserinterfacesys-temsresearch.InProceedingsofthe20thannualACMsymposiumonUserinterfacesoftwareandtechnology,pages251–258.ACM.PranavRajpurkar,JianZhang,KonstantinLopyrev,andPercyLiang.2016.Squad:100,000+questionsformachinecomprehensionoftext.arXivpreprintarXiv:1606.05250.MarcoTulioRibeiro,SameerSingh,andCarlosGuestrin.2018.Semanticallyequivalentadversar-ialrulesfordebuggingnlpmodels.InProceed-ingsofthe56thAnnualMeetingoftheAssociationforComputationalLinguistics(Volume1:LongPa-pers),volume1,pages856–865.Marc-AntoineRondeauandTimothyJHazen.2018.Systematicerroranalysisofthestanfordquestionansweringdataset.InProceedingsoftheWorkshoponMachineReadingforQuestionAnswering,pages12–20.MinjoonSeo,AniruddhaKembhavi,AliFarhadi,andHannanehHajishirzi.2016.Bidirectionalattentionflowformachinecomprehension.arXivpreprintarXiv:1611.01603.YelongShen,XiaodongLiu,KevinDuh,andJianfengGao.2017.Anempiricalanalysisofmultiple-turnreasoningstrategiesinreadingcomprehensiontasks.arXivpreprintarXiv:1711.03230.SoumyaWadhwa,KhyathiRaghaviChandu,andEricNyberg.2018.Comparativeanalysisofneuralqamodelsonsquad.InProceedingsoftheWorkshoponMachineReadingforQuestionAnswering.YizhongWang,KaiLiu,JingLiu,WeiHe,YajuanLyu,HuaWu,SujianLi,andHaifengWang.2018.Multi-passagemachinereadingcomprehensionwithcross-passageanswerverification.arXivpreprintarXiv:1805.02220.DirkWeissenborn,GeorgWiese,andLauraSeiffe.2017.Makingneuralqaassimpleaspossiblebutnotsimpler.arXivpreprintarXiv:1703.04816.YanZhang,JonathonHare,andAdamPrügel-Bennett.2018.Learningtocountobjectsinnaturalim-agesforvisualquestionanswering.arXiv758AAdditionalUseCasesWeusecasestudiesinVisualQuestionAnsweringandMachineComprehensiontofurtherdemon-stratetheusefulnessofErrudite.Avideodemoisavailableathttps://youtu.be/Dil5i0AYyu8.A.1VQA:Breakingdown“Howmany”(a)(b)AFigure10:Two“howmany”examples:VQACount-ingimprovesonSAAAforinstance(a),butpredictsanevenhighercountin(b).Highlighting“howmanybrownish”,wecreategroupsbasedonthesuggestedqueryA.WedemonstrateErrudite’spoweroncomparingmultiplemodelsinthecontextofVisualQuestionAnswering(VQA).WeanalyzeSAAA(KazemiandElqursh,2017)andVQACounting(Zhangetal.,759123456789100.00.51.0020,00040,00012345678910(a)(b)Figure13:TheVQACountingmodelbecomes760Q:WhyisPriestleyusuallygivencreditforbeingfirsttodiscoveroxygen?...Becausehepublishedhisfindingsfirst,Prestleyisusuallygivenpriorityinthediscover.Figure18:A“why”questionwherethemodelignoredtheapparenthint“because.”smallsubstringoftheprediction(withmultipleunnecessarytokensonbothends).Meanwhile,“what”questionshaverelativelyshorterpredic-tions.Hehypothesizedthatreframing“why”to“what”questionscouldresultinreasonablepre-dictionlengths,andcreatedarulerewrite(q,"WhyVERB"→"Whatisthereasonthat")toconfirmit.Outof151rewritteninstances,46hadshorterpredictions,and6hadlonger761targetunderinspection.Forinstance,wereturnquestiontypewhenauserinteractswiththequestion(q)inFigure10.Aprediction(p)asinFigure19willinsteadtriggerdifferentlevelsofcomparisons762DDSLDocumentationHerewelistthefunctionsdefinedinourdomain-specificlanguageforMCandVQA.ConvertersandTargetsGettargets:Thesetargetscontaintextspanspost-processedwithstate-of-the-artPOStaggers,lemma-tizersandNERmodels,alongwithmetadatasuchasexampleid,or(intheanswercase)themodelthatgeneratedit.Whenadditional763bothQAandVQA,whichisusuallythemodelpredictionprobability.AccuracyisforVQA,andtheothersareforQA.2.iscorrectsent(model:str)→bool:[MConly]Determineifthegivenmodellocatesthe